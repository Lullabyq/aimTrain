class AimGame{constructor(e){this.box=e,this.startBtn=e.querySelector("#start"),this.screens=e.querySelectorAll(".screen"),this.currentScreenIndex=0,this.board=e.querySelector("#board"),this.score=0,this.circleColors=["#FFDE40","#9F3ED5","#B9F73E"],e.addEventListener("click",(e=>{"A"==e.target.tagName&&(e.preventDefault(),this.changeScreen()),e.target.classList.contains("btn")&&(e.target.classList.contains("btn--mode")&&(this.clearActiveBtn(".btn--mode"),e.target.classList.add("active"),this.mode=+e.target.dataset.mode),e.target.classList.contains("btn--time")&&(this.clearActiveBtn(".btn--time"),e.target.classList.add("active"),this.time=+e.target.dataset.time),2==this.box.querySelectorAll(".active").length&&(this.changeScreen(),this.startGame())),e.target.classList.contains("circle")&&(clearInterval(this.hideId),this.score++,e.target.remove(),this.createCircle(),this.adjustToMode())}))}clearActiveBtn(e){this.box.querySelectorAll(e).forEach((e=>{e.classList.contains("active")&&e.classList.remove("active")}))}changeScreen(){this.screens[this.currentScreenIndex].classList.add("up"),this.currentScreenIndex++}startGame(){this.timerId=setInterval(this.decreaseTime.bind(this),1e3),this.setTime(),this.adjustToMode(),this.createCircle()}decreaseTime(){this.time--,this.setTime(),0==this.time&&this.finishGame()}setTime(){this.box.querySelector("#time__seconds").innerHTML=this.time<10?`0${this.time}`:`${this.time}`,this.time<=5&&this.colorTime("warn")}colorTime(e="normal"){let t=this.box.querySelector(".timer__info");"warn"===e?t.classList.add("warn"):(t.classList.contains("warn")&&t.classList.remove("warn"),t.classList.remove("hide"))}finishGame(){let e=this.screens[this.screens.length-1],t=this.box.querySelector(".result"),s=this.box.querySelector(".board--result");clearInterval(this.timerId),clearInterval(this.hideId),this.box.querySelector(".timer__info").classList.add("hide"),setTimeout((()=>{e.style.display="none",t.style.display="flex",s.innerHTML=`<h2 class="final__score">Score: <span class='primary'>${this.score}!</span></h2>`}),300)}adjustToMode(){switch(this.mode.toString()){case"1":this.MAX__CIRCLE__DIAMETER=60,this.MIN__CIRCLE__DIAMETER=30;break;case"2":this.MAX__CIRCLE__DIAMETER=30,this.MIN__CIRCLE__DIAMETER=18,this.setAutoHiding(this.mode);break;case"3":this.MAX__CIRCLE__DIAMETER=20,this.MIN__CIRCLE__DIAMETER=14,this.setAutoHiding(this.mode)}}setAutoHiding(e){let t=2==e?1500:1e3;this.hideId=setInterval(this.hideCircle.bind(this),t)}hideCircle(){this.board.querySelector(".circle").remove(),this.createCircle()}createCircle(){let e=this.generateCircleProp(),t=document.createElement("div");t.className="circle",t.style.backgroundColor=e.color,t.style.width=`${e.diameter}px`,t.style.height=`${e.diameter}px`,t.style.left=`${e.position[0]}px`,t.style.top=`${e.position[1]}px`,this.board.append(t)}generateCircleProp(){let e={},t=this.getRandomNumber(0,this.circleColors.length,!0);e.diameter=this.getRandomNumber(this.MIN__CIRCLE__DIAMETER,this.MAX__CIRCLE__DIAMETER);let s=this.getRandomNumber(0,this.board.offsetHeight-e.diameter),i=this.getRandomNumber(0,this.board.offsetWidth-e.diameter);return e.color=this.circleColors[t],e.position=[i,s],e}getRandomNumber(e,t,s=!1){let i=e+Math.random()*(t-e);return s?Math.floor(i):i}resetGame(){let e=this.screens[this.screens.length-1],t=this.box.querySelector(".result"),s=this.box.querySelector(".board--result");e.style.display="flex",t.style.display="none",s.innerHTML="",this.box.querySelectorAll(".up").forEach((e=>{e.classList.remove("up")})),this.currentScreenIndex=0,this.score=0,this.box.scrollTop=0,this.colorTime("normal"),this.clearActiveBtn(".btn");let i=this.board.querySelector(".circle");i&&i.remove(),clearInterval(this.timerId),clearInterval(this.hideId)}}let game=document.querySelector("#game"),aimTrainer=new AimGame(game);